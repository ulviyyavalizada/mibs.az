"use strict";$(document).ready(function(){$.fn.setCursorPosition=function(t){if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(t,t);else if($(this).get(0).createTextRange){var e=$(this).get(0).createTextRange();e.collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select()}},$("#af_phone").click(function(){$(this).setCursorPosition(3)}).mask("+7 (999) 999-99-99"),document.addEventListener("click",function(t){if(t.target.classList.contains("js-ripple")){var e,i=t.target,n=i.querySelector(".ink");n?e=n.clientWidth:((n=document.createElement("i")).classList.add("ink"),e=Math.max(i.clientWidth,i.clientHeight),n.style.width=e+"px",n.style.height=e+"px",["animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"].forEach(function(t){n.addEventListener(t,function(){n.parentNode.removeChild(n)})}),i.insertBefore(n,i.firstChild)),n.style.top=t.offsetY-e/2+"px",n.style.left=t.offsetX-e/2+"px",n.classList.remove("is-animating"),n.width=n.clientWidth+"px",n.classList.add("is-animating")}})}),window.onload=function(){({init:function(){this.cacheDom(),this.bindEventsNext(),this.giveFirstTabActive(),this.createDiv(),this.buttonsNavActive()},cacheDom:function(){this.$el=$("#form"),this.$buttonSend=this.$el.find("#send"),this.$consent=this.$el.find("#consent"),this.$buttonNext=this.$el.find("#next"),this.$buttonPrev=this.$el.find("#prev"),this.$tab=this.$el.find("fieldset.tab")},bindEventsNext:function(){this.$buttonNext.on("click",this.validateInput.bind(this)),this.$buttonPrev.on("click",this.changeClassElement.bind(this))},numberActiveTab:function(){for(var t=0;t<=this.$tab.length-1;t++)if(this.$tab[t].classList.contains("active"))return t},changeClassElement:function(t){var e=this.$tab.length-1,i=t,n=this.numberActiveTab();if("next"===i.target.getAttribute("id")&&n<e)var s=n+1;else if("prev"===i.target.getAttribute("id")&&1<n)s=n-1;else{if("prev"!==i.target.getAttribute("id")||1!==n)return!1;s=0}this.$tab[n].classList.remove("active"),this.$tab[s].classList.add("active");var a=this.numberActiveTab();this.buttonsNavActive(a),this.buttonSendActive()},validateInput:function(t){var e=this.numberActiveTab(),i=this.$tab[e].querySelectorAll("input[data-validate]");function n(t,e){if(e.length<2){c(t,"Длинна введенных данных меньше допустимого значения")}else{if(!(2<e.length)||isNaN(e))return 1;c(t,"Введите буквенные символы")}}function s(t,e){if(!(e.length<1))return 1;c(t,"Введите цифры длинной не менее 10 символов")}function a(t,e){if(0!=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e))return 1;c(t,"Введите корректный e-mail")}function c(t,e){var i=t.closest("div").lastChild;i.classList.add("active"),i.innerHTML=e,setTimeout(function(){i.classList.remove("active")},4e3)}for(var l=[],o=t,r=0;r<i.length;r++){var h=i[r],d=$(h).val();if("name"===h.getAttribute("name"))n(h,d)||l.push("Ошибка в блоке:",h);else if("number"===h.getAttribute("name"))s(h,d)||l.push("Ошибка в блоке:",h);else if("email"===h.getAttribute("name"))a(h,d)||l.push("Ошибка в блоке:",h);else if(!d){c(h,"Заполните поле"),l.push("Ошибка в блоке:",this)}}l.length<1&&this.changeClassElement(o)},createDiv:function(){var t=this.$el.find("input[data-validate]"),e=this.$el.find("span.count");if(t)for(var i=t.closest("div"),n=0;n<i.length;n++){var s=document.createElement("div");s.innerHTML="",i[n].appendChild(s)}if(e)for(var a=0;a<e.length;a++){var c=document.createElement("span");c.innerHTML=" "+e.length,e[a].after(c)}},giveFirstTabActive:function(){this.$tab[0].classList.add("active")},buttonSendActive:function(){this.numberActiveTab()===this.$tab.length-1?(this.$buttonSend[0].style.display="inline-block",this.$consent[0].style.display="block"):(this.$buttonSend[0].style.display="none",this.$consent[0].style.display="none")},buttonsNavActive:function(t){t<this.$tab.length-1?this.$buttonNext[0].classList.add("js-ripple"):this.$buttonNext[0].classList.toggle("js-ripple"),0<t?this.$buttonPrev[0].classList.add("js-ripple"):0===t&&this.$buttonPrev[0].classList.toggle("js-ripple")}}).init()};